<!doctype>
<html>
<head>
	<title>jsPDF</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<script type="text/javascript" src="js/pdf/jquery-1.7.1.min.js"></script>
	<script type="text/javascript" src="js/pdf/jquery-ui-1.8.17.custom.min.js"></script>
	<script type="text/javascript" src="js/pdf/jspdf.js"></script>

	<script type="text/javascript" src="js/pdf/jspdf.plugin.addimage.js"></script>

	<script type="text/javascript" src="js/pdf/jspdf.plugin.standard_fonts_metrics.js"></script>
	<script type="text/javascript" src="js/pdf/jspdf.plugin.split_text_to_size.js"></script>
	<script type="text/javascript" src="js/pdf/jspdf.plugin.from_html.js"></script>

</head>

<body>
<iframe frameborder="0" width="100%" height="97.5%"></iframe>
<script>

 /*   var imgData ='data:image/jpeg;base64,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';
*/

var id_recorrido = window.location.search.substring(1);
var Tabla_Recorrido;
		$.post("MySQL/Recorridos_Terminados.php", {Modo: "Cargar" , ID: id_recorrido }).done(
					function( data ) { Tabla_Recorrido=JSON.parse(data); console.log(Tabla_Recorrido.ADMIN);

					var Direcciones=Tabla_Recorrido.DIRECCIONES.split("%");
					var Llegada=Tabla_Recorrido.LLEGADA.split("%");
					var Salida=Tabla_Recorrido.SALIDA.split("%");
					var Camino=Tabla_Recorrido.CAMINO.split("%");
					var Pesos=Tabla_Recorrido.PESOS.split("%");

var doc = new jsPDF();

var y_info=48;
var w_info1=70;
var w_info2=43;
var w_12=w_info1+w_info2;
var w_direccion=60;
var w_peso=28;
var w_info3=75;
var h_info=14;
var h=7;
var x_1=5;
var y_1=55+h_info-h;
var w_1=25;     var w_2=33;     var w_3=20;     var w_4=22;
//doc.addImage(imgData, 'JPEG', 10, 40, 180, 180);

doc.setFontSize(12);
doc.setFontType("bold");

doc.rect(x_1, y_info, w_info1, h_info);                         doc.text(8   , 57 , "ADMIN: "+Tabla_Recorrido.ADMIN);
doc.rect(x_1+w_info1, y_info, w_info2 , h_info);                doc.text(80  , 57 , "PLACA: "+Tabla_Recorrido.PLACA);
doc.rect(x_1+w_12, y_info, w_info3 , h_info/2);                 doc.text(120 , 53 , "FECHA INICIO: "+Tabla_Recorrido.FECHA_INICIO);
doc.rect(x_1+w_12, y_info+h_info/2, w_info3 , h_info/2);        doc.text(123 , 60 , "FECHA FIN: "+Tabla_Recorrido.FECHA_FIN);


doc.rect(x_1, y_1, w_1, h_info);                                doc.text(10  , 71 , "PUNTO");
doc.rect(x_1+w_1, y_1, w_direccion , h_info);                   doc.text(50  , 71 , "DIRECCIÃ“N");
doc.rect(x_1+w_1+w_direccion, y_1, w_peso , h_info);            doc.text(98  , 71 , "PESO");
doc.rect(x_1+w_12, y_1, w_info3 , h);                           doc.text(145 , 67 , "ESTADO");
doc.rect(x_1+w_12, y_1+7, w_info3/2 , h);                       doc.text(128 , 74 , "LLEGADA");
doc.rect(x_1+w_12+w_info3/2, y_1+7, w_info3/2 , h);             doc.text(165 , 74 , "SALIDA");

var bj =0;
for (i in Direcciones){
doc.rect(x_1, y_1+h_info+bj, w_1, h);                              doc.text(15  , 81+bj , i);
doc.rect(x_1+w_1, y_1+h_info+bj, w_direccion , h);                 doc.text(33  , 81+bj , Direcciones[i]);
doc.rect(x_1+w_1+w_direccion, y_1+h_info+bj, w_peso , h);          doc.text(100 , 81+bj , Pesos[i]);

if (Llegada[i]==1){	  doc.setFillColor(0,255,0);
											doc.rect(x_1+w_12,y_1+14+bj, w_info3/2 ,h,'FD');
											doc.text(134, 81+bj, "OK");
}else{								doc.setFillColor(255,0,0);
											doc.rect(x_1+w_12,y_1+14+bj, w_info3/2 ,h,'FD');
											doc.text(134, 81+bj, "NO");
		 }

if (Salida[i]==1){		doc.setFillColor(0,255,0);
											doc.rect(x_1+w_12+w_info3/2, y_1+14+bj, w_info3/2 , h,'FD');
											doc.text(170, 81+bj, "OK");
}else{								doc.setFillColor(255,0,0);
											doc.rect(x_1+w_12+w_info3/2, y_1+14+bj, w_info3/2 , h,'FD');
											doc.text(170, 81+bj, "NO");
		 }
bj=bj+7;
if (i!=Direcciones.length-1){
	doc.rect(x_1, y_1+h_info+bj, w_1, h);                              doc.text(10  , 81+bj , i+" --- "+(parseInt(i)+1));
	doc.rect(x_1+w_1, y_1+h_info+bj, w_direccion , h);                 doc.text(53  , 81+bj , " ---------- ");
	doc.rect(x_1+w_1+w_direccion, y_1+h_info+bj, w_peso , h);          doc.text(100 , 81+bj , Pesos[i]);

if (Camino[i]==1){	  doc.setFillColor(0,255,0);
											doc.rect(x_1+w_12,y_1+14+bj, w_info3 ,h,'FD');
											doc.text(152, 81+bj, "OK");
}else{								doc.setFillColor(255,0,0);
											doc.rect(x_1+w_12,y_1+14+bj, w_info3 ,h,'FD');
											doc.text(152, 81+bj, "NO");
}
			 bj=bj+7;
}
}


var string = doc.output('datauristring');
$('iframe').attr('src', string);
	});
</script>

</body>
</html>
